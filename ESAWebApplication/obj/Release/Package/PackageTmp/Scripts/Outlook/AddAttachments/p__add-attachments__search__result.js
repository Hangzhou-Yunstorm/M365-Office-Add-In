(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{BR3I:function(e,a,t){"use strict";t.r(a);var n=t("fWQN"),i=t("mtLc"),r=t("yKVA"),s=t("879j"),c=t("q1tI"),o=t.n(c),l=t("Ty5D"),m=t("9kvl"),h=t("Mn5C"),p=t("BuAN"),u=t("Jgw9"),d=t("SLhE"),y=function(e){Object(r["a"])(t,e);var a=Object(s["a"])(t);function t(e){var i;Object(n["a"])(this,t),i=a.call(this,e),i.__id=void 0,i.__name=void 0;var r=i.props.location.query,s=void 0===r?{}:r,c=s.id,o=s.name;return i.__id=c,i.__name=o,i.state={checking:!1,copying:!1},i}return Object(i["a"])(t,[{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e&&e({type:"search/clearOpenFiles"})}},{key:"render",value:function(){var e=this.props,a=e.intl,t=e.files,n=e.loading,i=void 0!==n&&n,r=this.state,s=r.checking,c=r.copying;return this.__id&&this.__name?o.a.createElement(h["a"],{loading:i||s||c},o.a.createElement(p["a"],{title:a.formatMessage({id:"UI_HEADER_TITLE"}),onBack:this.back.bind(this),canBack:!0}),o.a.createElement(u["a"],{height:"calc(100vh - 60px)",files:t,emptyType:1,intl:a,onOpen:this.openDir.bind(this),onOpenShareLink:this.openShareLink.bind(this),onCopyShareLink:this.copyShareLink.bind(this)})):o.a.createElement(l["c"],{to:"/"})}},{key:"back",value:function(){var e=this.props.dispatch;e&&e({type:"search/back"})}},{key:"openDir",value:function(e,a){var t=this.props.dispatch;t&&t({type:"search/opendir",payload:{id:e,name:a}})}},{key:"openShareLink",value:function(e){var a=this;console.log("\u533f\u540d\u5171\u4eab",e);var t=Object(m["c"])();this.setState({checking:!0}),anyshare.sharelink.check(e.id,(function(n,i){return n?(a.setState({checking:!1}),void anyshare.system.alert(t.formatMessage({id:"ERROR_USER_FREEZE"}))):i?void anyshare.sharelink.initialize((function(n){var i=n.switches,r=void 0===i?{}:i,s=n.config,c=void 0===s?{}:s;a.setState({checking:!1});var o=r.enable_user_doc_out_link_share,l=void 0!==o&&o;if(l){var h=c.allowperm;25!=h||e.isDir?m["d"].push({pathname:"/shared",query:{gnsId:e.id,fileType:e.isDir?"folder":"file",name:e.name,size:e.size}}):anyshare.system.alert(t.formatMessage({id:"ERROR_USER_NOHAVEPERMS"}))}else anyshare.system.alert(t.formatMessage({id:"ERROR_USERDOC_SHAREDIABLED"}))}),(function(e){a.setState({checking:!1}),d["a"].alertError(e)})):(a.setState({checking:!1}),void anyshare.system.alert(t.formatMessage({id:"ERROR_USER_NOTOWNER"})))}))}},{key:"copyShareLink",value:function(e){var a=this;console.log("\u5b9e\u540d\u5171\u4eab",e),this.setState({copying:!0});var t=this.props.intl,n=e.id,i=e.isDir,r=e.size,s=e.name,c=i?"folder":"file";anyshare.sharelink.initialize((function(i){var o=i.switches,l=void 0===o?{}:o,m=(i.config,l.enable_user_doc_inner_link_share),h=void 0!==m&&m;if(!h)return a.setState({copying:!1}),void anyshare.system.alert(t.formatMessage({id:"ERROR_USERDOC_DISABLEINNERLINKSHARE"}));anyshare.outlook.getRealNameShareLink(n,c,(function(i){if(i){var c=i.Success,o=i.Data,l=i.StatusCode;if(c&&0==l)try{return anyshare.outlook.addCloudFiles(s,r,o,n),a.setState({copying:!1}),void anyshare.system.success(t.formatMessage({id:"UI_NOTICE_SHARELINKCOPIED"}))}catch(m){console.error(m)}if(0!=l)return a.setState({copying:!1}),void(e.isDir?d["a"].alertFolderError(l,s):d["a"].alertFileError(l,s))}a.setState({copying:!1}),d["a"].alertError(-1)}))}),(function(e){a.setState({copying:!1}),d["a"].alertError(e)}))}}]),t}(o.a.PureComponent);a["default"]=Object(m["b"])((function(e){var a=e.loading,t=e.search;return{loading:a.models.search,files:t.files}}))(Object(m["e"])(y))},BuAN:function(e,a,t){"use strict";var n=t("fWQN"),i=t("mtLc"),r=t("yKVA"),s=t("879j"),c=t("q1tI"),o=t.n(c),l=t("VgQY"),m=t.n(l),h=function(e){Object(r["a"])(t,e);var a=Object(s["a"])(t);function t(){return Object(n["a"])(this,t),a.apply(this,arguments)}return Object(i["a"])(t,[{key:"render",value:function(){var e=this.props,a=e.title,t=e.canBack,n=e.onBack;return o.a.createElement("div",{className:m.a.container},t&&o.a.createElement("button",{className:m.a.back,onClick:n},o.a.createElement("img",{src:"../../Images/Icons/SaveAndOpen/back.png"})),o.a.createElement("h1",{className:m.a.title},a))}}]),t}(c["PureComponent"]);a["a"]=h},Jgw9:function(e,a,t){"use strict";t("R9oj");var n=t("ECub"),i=t("fWQN"),r=t("mtLc"),s=t("yKVA"),c=t("879j"),o=(t("5Dmo"),t("3S7+")),l=(t("+L6B"),t("2/Rp")),m=(t("qVdP"),t("jsC+")),h=t("tJVT"),p=t("q1tI"),u=t.n(p),d=t("sR2k"),y=t.n(d),g=t("TSYQ"),v=t.n(g),E=t("9kvl"),_=t("yU8i"),f=t("aK7X"),k=t("SLhE"),S=function(e){var a=Object(E["g"])(),t=Object(p["useState"])(!1),n=Object(h["a"])(t,2),i=n[0],r=n[1],s=e.onOpen,c=e.file,d=e.onOpenShareLink,g=e.onCopyShareLink,S=e.displayMenu,O=void 0===S||S,b=c.id,N=c.name,R=c.isDir,I=c.icon,L=I||"folder";if(!R){var C=N.lastIndexOf("."),M=N.substr(C+1).toLowerCase();L=k["a"].getFileIcon(M)}var j=function(){return r(!1)},A=u.a.createElement("div",{className:"yc-menu"},u.a.createElement("div",{className:"yc-menu-item",onClick:function(){j(),g&&g(c)}},u.a.createElement(_["a"],{className:"yc-menu-item-icon"}),u.a.createElement("span",null,a.formatMessage({id:"UI_MENUITEM_COPYSHARELINK"}))),u.a.createElement("div",{className:"yc-menu-item",onClick:function(){j(),d&&d(c)}},u.a.createElement(f["a"],{className:"yc-menu-item-icon"}),u.a.createElement("span",null,a.formatMessage({id:"UI_MENUITEM_ANONYMOUSSHARE"})))),D=O&&b.startsWith("gns://");return u.a.createElement("div",{className:y.a.item,title:N},D?u.a.createElement(u.a.Fragment,null,u.a.createElement(m["a"],{overlay:A,trigger:["contextMenu"]},u.a.createElement("div",{className:y.a.content,onClick:function(){R&&s&&s(b,N)}},u.a.createElement("img",{className:y.a.icon,src:"../../Images/Icons/SaveAndOpen/".concat(L,".png")}),u.a.createElement("span",{className:v()("yc-text-overflow",y.a.name)},N))),u.a.createElement(o["a"],{visible:i,onVisibleChange:r,trigger:"click",placement:"bottomRight",overlay:A,overlayClassName:"yc-overlay"},u.a.createElement(l["a"],{className:y.a.more,type:"link",icon:"more"}))):u.a.createElement("div",{style:{width:"100%"},className:y.a.content,onClick:function(){R&&s&&s(b,N)}},u.a.createElement("img",{className:y.a.icon,src:"../../Images/Icons/SaveAndOpen/".concat(L,".png")}),u.a.createElement("span",{className:v()("yc-text-overflow",y.a.name)},N)))},O=function(e){Object(s["a"])(t,e);var a=Object(c["a"])(t);function t(){return Object(i["a"])(this,t),a.apply(this,arguments)}return Object(r["a"])(t,[{key:"render",value:function(){var e=this.props,a=e.height,t=e.files,i=e.onOpen,r=e.onCopyShareLink,s=e.onOpenShareLink,c=e.displayMenu,o=e.emptyType,l=e.intl,m=1==o?"../../Images/Icons/SaveAndOpen/emptyfolder.png":"../../Images/Icons/SaveAndOpen/nochild.png",h=1==o?l.formatMessage({id:"UI_FOLDER_LISTEMPTY"}):l.formatMessage({id:"UI_FOLDER_EMPTY"});return u.a.createElement("div",{className:y.a.container,style:{height:a}},u.a.createElement("div",{className:y.a.list},!t||t.length<=0?u.a.createElement(n["a"],{image:m,description:h,className:y.a.empty,imageStyle:{height:"64px"}}):t.map((function(e,a){return u.a.createElement(S,{key:a,file:e,displayMenu:c,onOpen:i,onCopyShareLink:r,onOpenShareLink:s})}))))}}]),t}(p["Component"]);a["a"]=O},Mn5C:function(e,a,t){"use strict";t("T2oS");var n=t("W9HT"),i=t("q1tI"),r=t.n(i);a["a"]=function(e){return r.a.createElement(n["a"],{style:{maxHeight:"unset",height:"100vh"},spinning:e.loading,indicator:r.a.createElement("img",{style:{width:"32px",height:"32px"},src:"../../Images/Icons/SaveAndOpen/loading.gif"})},e.children)}},VgQY:function(e,a,t){e.exports={container:"container___2e0bK",back:"back___1irP_",title:"title___1b4d8"}},sR2k:function(e,a,t){e.exports={container:"container___375fi",list:"list___3aERH",empty:"empty___FvVx1",item:"item___1N9DZ",content:"content___3ljKm",icon:"icon___3lioW",name:"name___51kzd",more:"more___w5gr5"}}}]);