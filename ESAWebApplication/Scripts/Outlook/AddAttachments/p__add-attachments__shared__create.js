(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"/kJo":function(e,a,t){e.exports={form:"form___2FfTf",item:"item___FBDsW",generateBtn:"generateBtn___10XZT",footer:"footer___88ypZ",datepicker:"datepicker___2kja0",timepicker:"timepicker___32bQP",hidden:"hidden___CrFi-",title:"title___2XzaZ",icon:"icon___k8kON",content:"content___27rfZ"}},"5Pk4":function(e,a,t){"use strict";t.r(a);var i=t("k1fw"),n=t("fWQN"),r=t("mtLc"),s=t("yKVA"),l=t("879j"),o=t("q1tI"),c=t.n(o),m=t("Mn5C"),d=t("BuAN"),u=t("9kvl"),_=t("olXo"),f=t.n(_),E=t("Annq"),p=function(e){Object(s["a"])(t,e);var a=Object(l["a"])(t);function t(){return Object(n["a"])(this,t),a.apply(this,arguments)}return Object(r["a"])(t,[{key:"pageBack",value:function(){u["d"].goBack()}},{key:"create",value:function(e){var a=this.props,t=a.dispatch,n=a.location.query,r=n.anonymoussharing,s=void 0!==r&&r;console.log("create",e),t&&t({type:"shared/create",payload:Object(i["a"])(Object(i["a"])({},e),{},{anonymoussharing:s})})}},{key:"render",value:function(){var e=this.props,a=e.intl,t=e.location.query,i=e.loading,n=void 0!==i&&i,r=t.gnsId,s=t.name,l=t.fileType,o=t.size;return r&&l&&anyshare.sharelink.initialized||this.pageBack(),console.log("loading",n),c.a.createElement(m["a"],{loading:n},c.a.createElement("div",{className:f.a.container},c.a.createElement(d["a"],{title:a.formatMessage({id:"UI_SHARED_TITLE"}),canBack:!0,onBack:this.pageBack.bind(this)}),c.a.createElement("div",{className:f.a.content},c.a.createElement(E["a"],{sharelink:{docId:r,title:s,fileType:l},size:o,fileName:s,onSubmit:this.create.bind(this),onCancel:this.pageBack.bind(this)}))))}}]),t}(c.a.PureComponent);a["default"]=Object(u["b"])((function(e){var a=e.loading;return{loading:a.models.shared}}))(Object(u["e"])(p))},Annq:function(e,a,t){"use strict";t("giR+");var i=t("fyUT"),n=(t("+L6B"),t("2/Rp")),r=(t("OaEy"),t("2fM7")),s=(t("y8nQ"),t("Vl3Y")),l=(t("5NDa"),t("5rEg")),o=t("k1fw"),c=t("oBTY"),m=(t("iQDF"),t("+eQT")),d=t("q1tI"),u=t.n(d),_=t("/kJo"),f=t.n(_),E=t("9kvl"),p=t("wd/R"),I=t.n(p),g=t("SLhE"),M=function(e){var a=Object(E["g"])(),t=e.canForever,i=void 0!==t&&t,n=e.value,r=e.onChange,s=e.allowexpiredays,l=void 0===s?0:s,o=n&&g["a"].isForeverDate(n),c=function(e){return!!e&&(e.isBefore(I()(),"day")||!i&&e.isAfter(I()().add(l,"days"),"day"))},d=function(e){r&&r(e)};return u.a.createElement(m["a"],{showTime:{format:"HH:mm"},value:o?null:n,allowClear:i,placeholder:o?a.formatMessage({id:"UI_COMMON_FOREVER"}):null===n||void 0===n?void 0:n.format("YYYY-MM-DD HH:mm"),disabledDate:c,format:"YYYY-MM-DD HH:mm",className:f.a.datepicker,onChange:function(e){null==e&&i&&(e=g["a"].forevertDate),d(e)}})},O=function(e){var a=Object(E["g"])(),t=e.sharelink,m=e.onSubmit,d=e.loading,_=void 0!==d&&d,p=e.onCancel,O=e.size,h=e.fileName,v=e.form,R=t||{},y=R.title,N=R.linkId,A=R.docId,k=R.expires_at,b=R.fileType,T=R.limited_times,S=R.item,U=R.password,C=S||{},D=C.perm,F=N&&""!=N.trim(),P=anyshare.sharelink.strategy.config,L=void 0===P?{}:P,x=L.accesspassword,w=L.limitaccesstimes,B=L.allowaccesstimes,V=void 0===B?999999999:B,j=L.allowperm,Y=L.defaultperm,H=L.limitexpiredays,Q=L.allowexpiredays,q=function(){var e=g["a"].randomPassword(4);console.log(e),v.setFieldsValue({password:e})},W=function(e){if(7==e||31==e){var t=[{text:a.formatMessage({id:"UI_PERM_READ"}),value:7}];return 31==e&&(t.push({text:a.formatMessage({id:"UI_PERM_UPLOAD"}),value:25}),t.push({text:a.formatMessage({id:"UI_PERM_READUPLOAD"}),value:31})),t}return 25==e?[{text:a.formatMessage({id:"UI_PERM_UPLOAD"}),value:25}]:[]},z=D||Y,K=[{text:a.formatMessage({id:"UI_PERM_READ"}),value:7}],X=[];if("folder"==b){K=W(j),X=Object(c["a"])(K);var Z=[];D&&(Z=[g["a"].getPermKeyValue(D)]),Z.map((function(e){K.findIndex((function(a){return a.value==e.value}))<0&&K.push(e)}))}else X=K,z=7;var G=x?[{required:x,message:a.formatMessage({id:"UI_FORM_ACCESSPASSWORDADMIN"})}]:[];G.push({type:"string",min:4,max:100,message:a.formatMessage({id:"UI_FORM_ACCESSPASSWORDLENGTHERROR"})}),G.push({pattern:/^[a-z_A-Z0-9-\~!%#$@-_.]+$/g,message:a.formatMessage({id:"UI_FORM_ACCESSPASSWORDREGEXPERROR"})});var J=w?[{required:w,message:a.formatMessage({id:"UI_FORM_LIMITACCESSTIMESREQUIRE"})},{type:"number",min:1,max:V,message:a.formatMessage({id:"UI_FORM_LIMITACCESSTIMESMAX"},{times:V})}]:[],$=function(e){e.preventDefault(),v.validateFields((function(e,t){if(!e){var i=t.perm,n=t.expires_at,r=g["a"].getPermKeyValue(j);if(X.findIndex((function(e){return e.value==i}))<0&&r)return void anyshare.system.notice(a.formatMessage({id:"UI_NOTICE_PERMCANNOTSET"},{perm:r.text}));if(H&&(g["a"].isForeverDate(n)||I()(n).isAfter(I()().add(Q,"days"))))return void anyshare.system.notice(a.formatMessage({id:"UI_NOTICE_ALLOWEXPIREDAYS"},{days:Q}));var s=t.size;m&&m(Object(o["a"])(Object(o["a"])({},t),{},{size:Number(s)}))}}))},ee=function(){return F?I()(k):Q&&Q>0?I()().add(Q||0,"days"):g["a"].forevertDate}(),ae=v.getFieldDecorator;return u.a.createElement(s["a"],{form:v,className:f.a.form,onSubmit:$},u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("docId",{initialValue:A})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("size",{initialValue:O})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("fileName",{initialValue:h})(u.a.createElement(l["a"],{type:"hidden"})),u.a.createElement(l["a"],{type:"hidden"})),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("linkId",{initialValue:N})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("fileType",{initialValue:b})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_LINKTITLE"})},ae("title",{initialValue:y,rules:[{required:!0,message:a.formatMessage({id:"UI_FORM_REQUIRED_ERROR"})},{type:"string",max:256,message:a.formatMessage({id:"UI_FORM_LINKTITLE_MAX"})}]})(u.a.createElement(l["a"],{placeholder:a.formatMessage({id:"UI_FORM_LINKTITLE_PLACEHOLDER"})}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_ACCESSRIGHTS"})},ae("perm",{initialValue:z})(u.a.createElement(r["a"],null,K.map((function(e){return u.a.createElement(r["a"].Option,{key:e.value,value:e.value},e.text)}))))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_TERMOFVALIDITY"})},ae("expires_at",{initialValue:ee})(u.a.createElement(M,{canForever:!H,allowexpiredays:Q}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_ACCESSPASSWORD"})},ae("password",{rules:G,initialValue:U})(u.a.createElement(l["a"],{addonAfter:u.a.createElement(n["a"],{type:"default",className:f.a.generateBtn,onClick:q},u.a.createElement(E["a"],{id:"UI_FORM_RANDOMPWD"})),placeholder:a.formatMessage({id:"UI_FORM_ACCESSPASSWORD_PLACEHOLDER".concat(x?"_REQUIRED":"")})}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_OPENINGTIMES"})},ae("limited_times",{rules:J,initialValue:T&&T<=0?void 0:T})(u.a.createElement(i["a"],{precision:0,max:w?V:999999999,min:1,style:{width:"100%"},placeholder:a.formatMessage({id:w?"UI_FORM_REQUIRED":"UI_FORM_OPTIONAL"})}))),u.a.createElement(s["a"].Item,{className:f.a.footer},u.a.createElement(n["a"],{type:"primary",htmlType:"submit",loading:_},a.formatMessage({id:F?"UI_BUTTON_SAVE":"UI_BUTTON_CREATELINK"})),u.a.createElement(n["a"],{type:"default",onClick:p},a.formatMessage({id:"UI_BUTTON_CANCEL"}))))};a["a"]=s["a"].create()(O)},BuAN:function(e,a,t){"use strict";var i=t("fWQN"),n=t("mtLc"),r=t("yKVA"),s=t("879j"),l=t("q1tI"),o=t.n(l),c=t("VgQY"),m=t.n(c),d=function(e){Object(r["a"])(t,e);var a=Object(s["a"])(t);function t(){return Object(i["a"])(this,t),a.apply(this,arguments)}return Object(n["a"])(t,[{key:"render",value:function(){var e=this.props,a=e.title,t=e.canBack,i=e.onBack;return o.a.createElement("div",{className:m.a.container},t&&o.a.createElement("button",{className:m.a.back,onClick:i},o.a.createElement("img",{src:"../../Images/Icons/SaveAndOpen/back.png"})),o.a.createElement("h1",{className:m.a.title},a))}}]),t}(l["PureComponent"]);a["a"]=d},Mn5C:function(e,a,t){"use strict";t("T2oS");var i=t("W9HT"),n=t("q1tI"),r=t.n(n);a["a"]=function(e){return r.a.createElement(i["a"],{style:{maxHeight:"unset",height:"100vh"},spinning:e.loading,indicator:r.a.createElement("img",{style:{width:"32px",height:"32px"},src:"../../Images/Icons/SaveAndOpen/loading.gif"})},e.children)}},VgQY:function(e,a,t){e.exports={container:"container___2e0bK",back:"back___1irP_",title:"title___1b4d8"}},olXo:function(e,a,t){}}]);