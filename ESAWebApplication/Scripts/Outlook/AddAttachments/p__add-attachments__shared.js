(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"/HP5":function(e,a,t){e.exports={container:"container___3yGV7",list:"list___2Q4Ml",item:"item___3c3hV",content:"content___dkpI3",title:"title___Xz4eW",more:"more___1oOBK",link:"link___1kKYc",row:"row___3JCbg",key:"key___2nUJJ",value:"value___1cRfu"}},BuAN:function(e,a,t){"use strict";var n=t("fWQN"),i=t("mtLc"),s=t("yKVA"),c=t("879j"),l=t("q1tI"),o=t.n(l),r=t("VgQY"),m=t.n(r),d=function(e){Object(s["a"])(t,e);var a=Object(c["a"])(t);function t(){return Object(n["a"])(this,t),a.apply(this,arguments)}return Object(i["a"])(t,[{key:"render",value:function(){var e=this.props,a=e.title,t=e.canBack,n=e.onBack;return o.a.createElement("div",{className:m.a.container},t&&o.a.createElement("button",{className:m.a.back,onClick:n},o.a.createElement("img",{src:"../../Images/Icons/SaveAndOpen/back.png"})),o.a.createElement("h1",{className:m.a.title},a))}}]),t}(l["PureComponent"]);a["a"]=d},HiWz:function(e,a,t){"use strict";t.r(a);t("2qtc");var n=t("kLXV"),i=t("k1fw"),s=(t("+L6B"),t("2/Rp")),c=t("fWQN"),l=t("mtLc"),o=t("yKVA"),r=t("879j"),m=t("q1tI"),d=t.n(m),_=t("Mn5C"),f=t("9kvl"),E=t("BuAN"),p=t("k3je"),u=t.n(p),h=(t("fu2T"),t("gK9i")),y=(t("5Dmo"),t("3S7+")),I=t("tJVT"),v=t("/HP5"),k=t.n(v),g=t("TSYQ"),N=t.n(g),M=t("SLhE"),O=t("wd/R"),T=t.n(O),b=function(e){var a=Object(f["g"])(),t=e.sharelink,n=e.onCopy,i=e.onDelete,c=e.onEdit,l=Object(m["useState"])(!1),o=Object(I["a"])(l,2),r=o[0],_=o[1],E=function(){var e=t.item,n=e||{},i=n.perm;return 7==i?a.formatMessage({id:"UI_PERM_READ"}):25==i?a.formatMessage({id:"UI_PERM_UPLOAD"}):31==i?a.formatMessage({id:"UI_PERM_READUPLOAD"}):"-"};return d.a.createElement("div",{className:k.a.content},d.a.createElement("div",{className:k.a.title},d.a.createElement("p",{className:"yc-text-overflow"},a.formatMessage({id:"UI_LABEL_CREATEAT"},{time:T()(t.created_at).format("YYYY/MM/DD HH:mm")})),d.a.createElement(y["a"],{visible:r,onVisibleChange:function(e){return _(e)},overlay:d.a.createElement("div",{className:"yc-menu"},d.a.createElement("div",{className:"yc-menu-item",onClick:function(){_(!1),n(t)}},a.formatMessage({id:"UI_MENUITEM_COPYSHARELINK"})),d.a.createElement("div",{className:"yc-menu-item",onClick:function(){_(!1),c(t)}},a.formatMessage({id:"UI_MENUITEM_EDIT"})),d.a.createElement("div",{className:"yc-menu-item",onClick:function(){_(!1),i(t.linkId,t.fileType)}},a.formatMessage({id:"UI_MENUITEM_DELETE"}))),placement:"bottomRight",overlayClassName:"yc-overlay",trigger:"click"},d.a.createElement(s["a"],{className:k.a.more,type:"link",icon:"more"}))),d.a.createElement("div",{className:N()("yc-text-overflow",k.a.link),title:"".concat(window.asUrl,"/link/").concat(t.linkId)},window.asUrl,"/link/",t.linkId),d.a.createElement("div",{className:k.a.row},d.a.createElement("span",{className:k.a.key},a.formatMessage({id:"UI_FORM_ACCESSRIGHTS"}),"\uff1a"),d.a.createElement("span",{className:N()(k.a.value,"yc-text-overflow")},E())),d.a.createElement("div",{className:k.a.row},d.a.createElement("span",{className:k.a.key},a.formatMessage({id:"UI_FORM_TERMOFVALIDITY"}),"\uff1a"),d.a.createElement("span",{className:N()(k.a.value,"yc-text-overflow")},t.expires_at&&M["a"].isForeverDate(T()(t.expires_at))?a.formatMessage({id:"UI_COMMON_FOREVER"}):T()(t.expires_at).format("YYYY/MM/DD HH:mm"))),d.a.createElement("div",{className:k.a.row},d.a.createElement("span",{className:k.a.key},a.formatMessage({id:"UI_FORM_ACCESSPASSWORD"}),"\uff1a"),d.a.createElement("span",{className:N()(k.a.value,"yc-text-overflow")},t.password||a.formatMessage({id:"UI_COMMON_NONE"}))),d.a.createElement("div",{className:k.a.row},d.a.createElement("span",{className:k.a.key},a.formatMessage({id:"UI_LABLE_OPENINGTIMES"}),"\uff1a"),d.a.createElement("span",{className:N()(k.a.value,"yc-text-overflow")},t.limited_times&&t.limited_times>0?t.limited_times:a.formatMessage({id:"UI_VALUES_UNRESTRICTED"}))))},C=function(e){var a=Object(f["g"])(),t=e.sharelinks,n=e.onCreate,c=e.onCopy,l=e.onEdit,o=e.onDelete,r=e.fileType;return d.a.createElement("div",{className:k.a.container},d.a.createElement("div",null,d.a.createElement(s["a"],{type:"link",icon:"plus",onClick:n},a.formatMessage({id:"UI_BUTTON_CREATSHARED"}))),d.a.createElement(h["a"],{expandIconPosition:"right",className:k.a.list},t.map((function(e,a){return d.a.createElement(h["a"].Panel,{key:e.linkId||a,header:e.title,className:k.a.item},d.a.createElement(b,{sharelink:Object(i["a"])(Object(i["a"])({},e),{},{fileType:r}),onCopy:c,onEdit:l,onDelete:o}))}))))},U=C,A=function(e){Object(o["a"])(t,e);var a=Object(r["a"])(t);function t(){var e;Object(c["a"])(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=a.call.apply(a,[this].concat(i)),e._fileInfo={},e.state={copying:!1},e}return Object(l["a"])(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.dispatch,t=e.location.query,n=t.gnsId,i=t.name,s=t.fileType,c=t.size;n&&s&&anyshare.sharelink.initialized||f["d"].goBack(),this._fileInfo={gnsId:n,name:i,fileType:s,size:c},a&&a({type:"shared/fetchShareLinks",payload:this._fileInfo})}},{key:"render",value:function(){var e=this.props,a=e.intl,t=e.loading,n=void 0!==t&&t,i=e.sharelinks,c=this.state.copying;return d.a.createElement(_["a"],{loading:n||c},d.a.createElement("div",{className:u.a.container},d.a.createElement(E["a"],{title:a.formatMessage({id:"UI_SHARED_TITLE"}),canBack:!0,onBack:this.pageBack.bind(this)}),i&&i.length>0?d.a.createElement(U,{fileType:this._fileInfo.fileType,onCopy:this.onCopy.bind(this),onEdit:this.onEdit.bind(this),onDelete:this.onDelete.bind(this),sharelinks:i,onCreate:this.create.bind(this)}):d.a.createElement("div",{className:u.a.empty},d.a.createElement(s["a"],{type:"default",onClick:this.create.bind(this),icon:"plus",className:u.a.createBtn},a.formatMessage({id:"UI_BUTTON_CREATSHARED"})))))}},{key:"onCopy",value:function(e){var a=this;console.log("fileInfo",this._fileInfo),this.setState({copying:!0});var t=this.props.intl;setTimeout((function(){var n=e.linkId,i=e.password,s=a._fileInfo,c=s.size,l=s.gnsId,o=s.name;if(c&&l&&o&&n)try{return anyshare.outlook.addCloudFiles(o,c,n,l,i,!0),a.setState({copying:!1}),void anyshare.system.success(t.formatMessage({id:"UI_NOTICE_SHARELINKCOPIED"}))}catch(r){console.error(r)}a.setState({copying:!1}),M["a"].alertError(-1)}),50)}},{key:"onEdit",value:function(e){f["d"].push({pathname:"/shared/edit",state:{sharelink:e,fileType:this._fileInfo.fileType},query:Object(i["a"])({},this._fileInfo)})}},{key:"onDelete",value:function(e,a){var t=this.props,i=t.dispatch,s=t.intl;n["a"].confirm({title:d.a.createElement("div",{className:u.a.title},s.formatMessage({id:"UI_NOTICE_TITLETIPS"})),content:d.a.createElement("div",{className:u.a.content},s.formatMessage({id:"UI_NOTICE_DELETESHARELINK"})),icon:d.a.createElement("img",{src:"../../Images/Icons/SaveAndOpen/notice.png",className:u.a.icon}),onOk:function(){i&&i({type:"shared/delete",payload:{linkId:e,fileType:a}})}})}},{key:"pageBack",value:function(){f["d"].replace("/")}},{key:"create",value:function(){f["d"].push({pathname:"/shared/create",query:Object(i["a"])({},this._fileInfo)})}}]),t}(d.a.PureComponent);a["default"]=Object(f["b"])((function(e){var a=e.loading,t=e.shared;return{loading:a.models.shared,sharelinks:t.sharelinks}}))(Object(f["e"])(A))},Mn5C:function(e,a,t){"use strict";t("T2oS");var n=t("W9HT"),i=t("q1tI"),s=t.n(i);a["a"]=function(e){return s.a.createElement(n["a"],{style:{maxHeight:"unset",height:"100vh"},spinning:e.loading,indicator:s.a.createElement("img",{style:{width:"32px",height:"32px"},src:"../../Images/Icons/SaveAndOpen/loading.gif"})},e.children)}},VgQY:function(e,a,t){e.exports={container:"container___2e0bK",back:"back___1irP_",title:"title___1b4d8"}},k3je:function(e,a,t){e.exports={container:"container___1xHBJ",empty:"empty___1IZVg",title:"title___22gW-",content:"content___3Y4Oj",icon:"icon___2b8fN"}}}]);