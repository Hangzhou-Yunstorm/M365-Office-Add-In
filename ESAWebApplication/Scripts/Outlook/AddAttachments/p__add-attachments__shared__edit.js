(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"/kJo":function(e,a,t){e.exports={form:"form___2FfTf",item:"item___FBDsW",generateBtn:"generateBtn___10XZT",footer:"footer___88ypZ",datepicker:"datepicker___2kja0",timepicker:"timepicker___32bQP",hidden:"hidden___CrFi-",title:"title___2XzaZ",icon:"icon___k8kON",content:"content___27rfZ"}},Annq:function(e,a,t){"use strict";t("giR+");var i=t("fyUT"),n=(t("+L6B"),t("2/Rp")),r=(t("OaEy"),t("2fM7")),s=(t("y8nQ"),t("Vl3Y")),l=(t("5NDa"),t("5rEg")),m=t("k1fw"),o=t("oBTY"),c=(t("iQDF"),t("+eQT")),d=t("q1tI"),u=t.n(d),_=t("/kJo"),f=t.n(_),E=t("9kvl"),I=t("wd/R"),p=t.n(I),g=t("SLhE"),M=function(e){var a=Object(E["g"])(),t=e.canForever,i=void 0!==t&&t,n=e.value,r=e.onChange,s=e.allowexpiredays,l=void 0===s?0:s,m=n&&g["a"].isForeverDate(n),o=function(e){return!!e&&(e.isBefore(p()(),"day")||!i&&e.isAfter(p()().add(l,"days"),"day"))},d=function(e){r&&r(e)};return u.a.createElement(c["a"],{showTime:{format:"HH:mm"},value:m?null:n,allowClear:i,placeholder:m?a.formatMessage({id:"UI_COMMON_FOREVER"}):null===n||void 0===n?void 0:n.format("YYYY-MM-DD HH:mm"),disabledDate:o,format:"YYYY-MM-DD HH:mm",className:f.a.datepicker,onChange:function(e){null==e&&i&&(e=g["a"].forevertDate),d(e)}})},O=function(e){var a=Object(E["g"])(),t=e.sharelink,c=e.onSubmit,d=e.loading,_=void 0!==d&&d,I=e.onCancel,O=e.size,R=e.fileName,v=e.form,h=t||{},y=h.title,A=h.linkId,N=h.docId,S=h.expires_at,T=h.fileType,U=h.limited_times,k=h.item,C=h.password,D=k||{},b=D.perm,F=A&&""!=A.trim(),L=anyshare.sharelink.strategy.config,P=void 0===L?{}:L,x=P.accesspassword,w=P.limitaccesstimes,V=P.allowaccesstimes,B=void 0===V?999999999:V,j=P.allowperm,Y=P.defaultperm,H=P.limitexpiredays,Q=P.allowexpiredays,q=function(){var e=g["a"].randomPassword(4);console.log(e),v.setFieldsValue({password:e})},W=function(e){if(7==e||31==e){var t=[{text:a.formatMessage({id:"UI_PERM_READ"}),value:7}];return 31==e&&(t.push({text:a.formatMessage({id:"UI_PERM_UPLOAD"}),value:25}),t.push({text:a.formatMessage({id:"UI_PERM_READUPLOAD"}),value:31})),t}return 25==e?[{text:a.formatMessage({id:"UI_PERM_UPLOAD"}),value:25}]:[]},K=b||Y,z=[{text:a.formatMessage({id:"UI_PERM_READ"}),value:7}],X=[];if("folder"==T){z=W(j),X=Object(o["a"])(z);var J=[];b&&(J=[g["a"].getPermKeyValue(b)]),J.map((function(e){z.findIndex((function(a){return a.value==e.value}))<0&&z.push(e)}))}else X=z,K=7;var Z=x?[{required:x,message:a.formatMessage({id:"UI_FORM_ACCESSPASSWORDADMIN"})}]:[];Z.push({type:"string",min:4,max:100,message:a.formatMessage({id:"UI_FORM_ACCESSPASSWORDLENGTHERROR"})}),Z.push({pattern:/^[a-z_A-Z0-9-\~!%#$@-_.]+$/g,message:a.formatMessage({id:"UI_FORM_ACCESSPASSWORDREGEXPERROR"})});var G=w?[{required:w,message:a.formatMessage({id:"UI_FORM_LIMITACCESSTIMESREQUIRE"})},{type:"number",min:1,max:B,message:a.formatMessage({id:"UI_FORM_LIMITACCESSTIMESMAX"},{times:B})}]:[],$=function(e){e.preventDefault(),v.validateFields((function(e,t){if(!e){var i=t.perm,n=t.expires_at,r=g["a"].getPermKeyValue(j);if(X.findIndex((function(e){return e.value==i}))<0&&r)return void anyshare.system.notice(a.formatMessage({id:"UI_NOTICE_PERMCANNOTSET"},{perm:r.text}));if(H&&(g["a"].isForeverDate(n)||p()(n).isAfter(p()().add(Q,"days"))))return void anyshare.system.notice(a.formatMessage({id:"UI_NOTICE_ALLOWEXPIREDAYS"},{days:Q}));var s=t.size;c&&c(Object(m["a"])(Object(m["a"])({},t),{},{size:Number(s)}))}}))},ee=function(){return F?p()(S):Q&&Q>0?p()().add(Q||0,"days"):g["a"].forevertDate}(),ae=v.getFieldDecorator;return u.a.createElement(s["a"],{form:v,className:f.a.form,onSubmit:$},u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("docId",{initialValue:N})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("size",{initialValue:O})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("fileName",{initialValue:R})(u.a.createElement(l["a"],{type:"hidden"})),u.a.createElement(l["a"],{type:"hidden"})),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("linkId",{initialValue:A})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.hidden},ae("fileType",{initialValue:T})(u.a.createElement(l["a"],{type:"hidden"}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_LINKTITLE"})},ae("title",{initialValue:y,rules:[{required:!0,message:a.formatMessage({id:"UI_FORM_REQUIRED_ERROR"})},{type:"string",max:256,message:a.formatMessage({id:"UI_FORM_LINKTITLE_MAX"})}]})(u.a.createElement(l["a"],{placeholder:a.formatMessage({id:"UI_FORM_LINKTITLE_PLACEHOLDER"})}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_ACCESSRIGHTS"})},ae("perm",{initialValue:K})(u.a.createElement(r["a"],null,z.map((function(e){return u.a.createElement(r["a"].Option,{key:e.value,value:e.value},e.text)}))))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_TERMOFVALIDITY"})},ae("expires_at",{initialValue:ee})(u.a.createElement(M,{canForever:!H,allowexpiredays:Q}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_ACCESSPASSWORD"})},ae("password",{rules:Z,initialValue:C})(u.a.createElement(l["a"],{addonAfter:u.a.createElement(n["a"],{type:"default",className:f.a.generateBtn,onClick:q},u.a.createElement(E["a"],{id:"UI_FORM_RANDOMPWD"})),placeholder:a.formatMessage({id:"UI_FORM_ACCESSPASSWORD_PLACEHOLDER".concat(x?"_REQUIRED":"")})}))),u.a.createElement(s["a"].Item,{className:f.a.item,label:a.formatMessage({id:"UI_FORM_OPENINGTIMES"})},ae("limited_times",{rules:G,initialValue:U&&U<=0?void 0:U})(u.a.createElement(i["a"],{precision:0,max:w?B:999999999,min:1,style:{width:"100%"},placeholder:a.formatMessage({id:w?"UI_FORM_REQUIRED":"UI_FORM_OPTIONAL"})}))),u.a.createElement(s["a"].Item,{className:f.a.footer},u.a.createElement(n["a"],{type:"primary",htmlType:"submit",loading:_},a.formatMessage({id:F?"UI_BUTTON_SAVE":"UI_BUTTON_CREATELINK"})),u.a.createElement(n["a"],{type:"default",onClick:I},a.formatMessage({id:"UI_BUTTON_CANCEL"}))))};a["a"]=s["a"].create()(O)},BuAN:function(e,a,t){"use strict";var i=t("fWQN"),n=t("mtLc"),r=t("yKVA"),s=t("879j"),l=t("q1tI"),m=t.n(l),o=t("VgQY"),c=t.n(o),d=function(e){Object(r["a"])(t,e);var a=Object(s["a"])(t);function t(){return Object(i["a"])(this,t),a.apply(this,arguments)}return Object(n["a"])(t,[{key:"render",value:function(){var e=this.props,a=e.title,t=e.canBack,i=e.onBack;return m.a.createElement("div",{className:c.a.container},t&&m.a.createElement("button",{className:c.a.back,onClick:i},m.a.createElement("img",{src:"../../Images/Icons/SaveAndOpen/back.png"})),m.a.createElement("h1",{className:c.a.title},a))}}]),t}(l["PureComponent"]);a["a"]=d},Mn5C:function(e,a,t){"use strict";t("T2oS");var i=t("W9HT"),n=t("q1tI"),r=t.n(n);a["a"]=function(e){return r.a.createElement(i["a"],{style:{maxHeight:"unset",height:"100vh"},spinning:e.loading,indicator:r.a.createElement("img",{style:{width:"32px",height:"32px"},src:"../../Images/Icons/SaveAndOpen/loading.gif"})},e.children)}},VgQY:function(e,a,t){e.exports={container:"container___2e0bK",back:"back___1irP_",title:"title___1b4d8"}},ctLJ:function(e,a,t){"use strict";t.r(a);var i=t("k1fw"),n=t("q1tI"),r=t.n(n),s=t("Mn5C"),l=t("BuAN"),m=t("9kvl"),o=t("Annq"),c=function(e){var a=Object(m["g"])(),t=e.dispatch,n=e.loading,c=e.location,d=c.state,u=void 0===d?{}:d,_=c.query,f=_.name,E=u.sharelink,I=void 0===E?{}:E,p=I.linkId;p&&""!=p&&anyshare.sharelink.initialized||m["d"].goBack();var g=function(){m["d"].goBack()},M=function(e){console.log(e),t({type:"shared/update",payload:Object(i["a"])({},e)})};return r.a.createElement(s["a"],{loading:!1},r.a.createElement("div",null,r.a.createElement(l["a"],{title:a.formatMessage({id:"UI_SHARED_TITLE"}),canBack:!0,onBack:g}),r.a.createElement(o["a"],{fileName:f,sharelink:I,onSubmit:M,onCancel:g,loading:n})))};a["default"]=Object(m["b"])((function(e){var a=e.loading;return{loading:a.models.shared}}))(c)}}]);